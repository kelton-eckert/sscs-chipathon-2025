# GLayout DEV Environment Setup 

> üöß **Under Construction** 

Glayout Specific Steps  
Instructions up to this stage are common for all. In the following, we will see Glayout-specific steps. For Glayout, we are going to build the Container with additional steps (with the same scripts) to forward Port: 888 (alongside VNC or X11) to start a Jupyter Server to execute Glayout Notebooks.  
\*\*Note: Keep an eye on the different containers that are being built for different purposes. They have different names and container IDs.    
Once Docker is up and running, go to the *Container* tab in Docker Desktop, click on the container name and navigate to the *Exec* tab and execute *./run\_Gl.sh* in the terminal of Docker.

*Step 1:* Build Docker container with the ‚Äústart\_chipathon\_\[--\].\[--\]‚Äù scripts as described before.   
![][image1]

*Step 2:* Open Docker Desktop Dashboard. Go to the *Containers* tab, and you should see the container running

![][image2]

*Step 3:* Navigate to the \`Exec\` tab

![][image3]

*Step 4:* In the Exec terminal (terminal of Docker)

* run \`*bash /dockerstartup/scripts/run\_GL.sh*\`


         ![][image4]  
(You can run this command using the VNC or X11 accessed terminal as well.)

This will set up and install the necessary components (will take some time) for the gLayout and will start a Jupyter server to access it. You can access it from your browser ‚Äú[*http://localhost:8888/lab*](http://localhost:8888/lab)‚Äù or VsCode

![][image5]

Please note that you would need to restart the Jupyter server if you close or rebuild the Docker container. You can run it again by executing the following command in the Exec terminal ‚Äúbash /dockerstartup/scripts/run\_GL.sh‚Äù , again.  
In case you don't see the ‚ÄúGLdev‚Äù kernel in your Jupyter Server 

![][image6]

In the ‚ÄúExec‚Äù terminal, 

* First run python \-m ipykernel install \--user \--name="GLdev"  
* Then run bash /dockerstartup/scripts/run\_GL.sh

![][image7]

Then you should see the GLdev Kernel. Don‚Äôt forget to choose it for all gLayout code  
![][image8]

*Installing KLive and PDK Colour Schemes*  
*To visualise the GDS files generated by the Glayout, you can use the \_.show() function. For this to work, you need to have Klive plugin installed and running in the Klayout* 

1. Run your container using the previously described run command   
2. Run KLayout by just typing ‚Äúklayout‚Äù in the terminal of the Docker container  
3. Install KLive  
   1. Go to Tools \-\> Manage Packages \-\> Install New Packages \-\> Search  
   2. Search for KLive  
   3. Install the package that looks like this:  
      ![][image1]

4. Install PDK Color Schemes (You can just source the PDK too with Klayout Path)  
   1. Go to Tools \-\> Manage Packages \-\> Install New Packages \-\> Search  
   2. Search for gf180  
   3. Install the package that looks like this:

   ![][image2]

5. Once it's installed on your host system. Type in ‚Äúdocker ps \-a‚Äù. This will list all of your running containers. Copy the container ID of the most recently started one or the one you installed Klive  
6. **Enter the command**  
   **‚Äúdocker commit \-a "Jane Doe" \-m "Installed Klive" \<Container ID\> hpretl/iic-osic-tools:chipathon‚Äù**  
   **Note: without committing to the image, Docker image won't retain the changes.** 

**Installing the classical Docker CE \-**

*sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin*

**Miscellaneous Docker Commands \-** 

1. To remove the container, run the command:   
   1. *(Mac) docker container rm glayoutcontainer*  
   2. *(Linux/WSL) docker rm glayoutcontainer*  
2. To stop a container, run the command:  
   1. *(Mac) docker container stop glayoutcontainer*  
   2. *(Linux/WSL) docker stop glayoutcontainer*  
3. To restart the container, run the command:   
   1. *(Mac) docker container restart glayoutcontainer*  
   2. *(Linux/WSL) docker restart glayoutcontainer*  
4. To execute a running container, first check its status by running   
   1. *(Mac) docker container ls \-a (Linux/WSL) docker ls \-a*  
   2. *docker exec \-it glayoutcontainer bash* (if *glayoutcontainer* is running) (\-it runs the container in interactive mode)   
5. To make a permanent change to Docker:   
   1. *docker container commit \<container ID\>*  
   2. *docker commit \<container ID\>*  
      

***Note: ‚Äòexit‚Äô in a running Docker container halts all running processes and stops. A graceful shutdown can be achieved by using docker stop glayoutcontainer***  